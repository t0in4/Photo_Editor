<h5 id="description">Description</h5>

<p>Let's work on two more filters â€” <strong>saturation </strong>and<strong> gamma</strong>.</p>

<p>To increase the <strong>saturation</strong>,<strong> </strong>we must increase the color intensity without affecting its brightness.</p>

<p>An increase in <strong>gamma</strong> means that the image is more focused on shadows than highlights.</p>

<h5 id="objectives">Objectives</h5>

<ul>
  <li>Add a <code class="java">Slider</code> widget for specifying the photo saturation with the <code class="java">id</code> attribute of <code class="java">slSaturation</code>. The values may vary from <code class="java">-250</code> to <code class="java">250</code> with the step size of <code class="java">10</code> and the initial value of <code class="java">0</code>;</li>
  <li>Add a <code class="java">Slider</code> widget for specifying the photo gamma with the <code class="java">id</code> attribute of <code class="java">slGamma</code>. The values may vary from <code class="java">0.2</code> to <code class="java">4</code> with the step size of <code class="java">0.2</code> and the initial value of <code class="java">1</code>;</li>
  <li>The saturation filter is calculated in the following way:</li>
</ul>

<p><span class="math-tex">\[Red = alpha \times (Red - rgbAvg) + rgbAvg \\ Green = alpha \times (Green - rgbAvg) + rgbAvg \\ Blue = alpha \times (Blue - rgbAvg) + rgbAvg\]</span>where:</p>

<p><span class="math-tex">\[alpha = \frac {(255 + saturation)}{(255 - saturation)} \\\]</span><span class="math-tex">\[rgbAvg = \frac {(Red + Green + Blue)} 3\]</span></p>

<p>Saturation is the current saturation slider value. The <code class="java">rgbAvg</code> is calculated for each pixel, that is, each pixel has its own <code class="java">rgbAvg</code>. The <code class="java">rgbAvg</code> that is used for <code class="java">saturationFilter</code> calculations, must be calculated after all previous filters have already been applied.</p>

<ul>
  <li>
    <p>The gamma filter<strong> </strong>can be calculated in the following way:</p>
  </li>
</ul>

<p><span class="math-tex">\[Red = 255 * (Red \div 255)^g \\ Green = 255 * (Green \div 255)^g \\ Blue = 255 * (Blue \div 255)^g\]</span>where:</p>

<p><span class="math-tex">\(g\)</span> is the current gamma slider value.</p>

<ul>
  <li>
    <p>As you know, the order of filters matters, so to pass the tests filters must be applied in the following order: <code class="java">brightnessFilter</code> -&gt; <code class="java">contrastFilter</code> -&gt; <code class="java">saturationFilter</code> -&gt; <code class="java">gammaFilter</code>;</p>
  </li>
</ul>

<p><div class="alert alert-warning">Once again, the tests allow some margin rounding error, but it's recommended to use <code class="java">Ints</code> and <code class="java">Doubles</code> when necessary (power operations). Depending on an emulated/actual device, some sliders may be placed outside the view because the screen is not big enough. You can use <code class="java">ScrollView</code> to get around that issue, but tests won't enforce it.</div></p>

<h5 id="example">Example</h5>

<p><strong>Example 1:</strong> <em>sliders &amp; result</em></p>

<p><img alt="" height="520" name="Android Emulator - Pixel_3a_API_30_x86_5554 2021-12-05 12-34-32.gif" src="https://ucarecdn.com/319a9c01-acb7-4a55-9704-1a23f58affce/" width="270"></p>